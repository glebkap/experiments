# Поиск дверей и окон на планах зданий

Программное решение для автоматического обнаружения, маркировки и подсчета дверей и окон на планах зданий с использованием методов компьютерного зрения.

## Описание

Данное приложение анализирует изображения планов зданий и выполняет следующие задачи:
- Обнаружение дверей и окон на плане с использованием алгоритмов ORB, инвариантных к повороту
- Маркировка обнаруженных объектов (двери - красным, окна - синим)
- Подсчет количества дверей и окон
- Создание визуального отчета с размеченными объектами

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/find_door_and_window.git
cd find_door_and_window
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Структура проекта

- `docs/` - документация проекта
- `domain/` - доменный слой (сущности и интерфейсы репозиториев)
- `infrastructure/` - инфраструктурный слой (реализации репозиториев)
- `usecase/` - слой бизнес-логики (сценарии использования)
- `data/` - тестовые данные и примеры
  - `doors/` - эталонные изображения дверей
  - `windows/` - эталонные изображения окон
  - `plans/` - планы зданий для обработки
- `results/` - результаты обработки
- `main.py` - точка входа в приложение

## Использование

Для обработки плана здания выполните:

```bash
python main.py --image <путь_к_изображению> --data-dir <путь_к_директории_данных> --output-dir <путь_к_директории_вывода>
```

### Основные параметры:
- `--image` - путь к изображению плана здания (обязательный)
- `--data-dir` - путь к директории с данными (по умолчанию ./data)
- `--output-dir` - путь к директории вывода (по умолчанию ./results)

### Параметры алгоритма шаблонного сопоставления:
- `--template-threshold` - порог сопоставления шаблонов (по умолчанию 0.7)

### Параметры алгоритма ORB (инвариантного к повороту):
- `--orb-features` - максимальное количество ключевых точек (по умолчанию 1000)
- `--orb-min-matches` - минимальное количество соответствий для обнаружения объекта (по умолчанию 10)
- `--orb-match-ratio` - пороговое отношение для фильтрации соответствий (по умолчанию 0.75)

### Пример:
```bash
python main.py --image ./data/plans/building_1.png --data-dir ./data --output-dir ./results --orb-features 1500 --orb-min-matches 8
```

## Алгоритм

Программа использует комбинацию следующих алгоритмов компьютерного зрения:
1. ORB (Oriented FAST and Rotated BRIEF) - для обнаружения объектов независимо от их ориентации
2. Шаблонное сопоставление (Template Matching) - для дополнительной проверки

Подробное описание алгоритма обнаружения дверей и окон можно найти в [документации по алгоритму](./docs/algorithm.md).

## Требования

- Python 3.6+
- OpenCV 4.5+
- NumPy 1.19+

## Лицензия

[MIT License](LICENSE) 
